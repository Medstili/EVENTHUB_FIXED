<!-- ticket-details.component.html -->
 
  <div class="btn-container" style="display: flex; justify-content: flex-start; align-items: center;">
    <button type="button" mat-button color="warn" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>
<mat-card class="ticket-card mat-elevation-z4" @slideInRight [ngClass]="{'handset': (isHandset$ | async)}">
  <mat-card-header>
    <mat-card-title>
      Ticket #{{ ticket.id }}
    </mat-card-title>
    <mat-card-subtitle>
      <a mat-button color="primary" [routerLink]="['/events', ticket.event.id]">
        {{ ticket.event.title }}
      </a>
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <!-- QR Code -->
    <section class="qr-section">
      
      <!-- Ticket.ticket details table -->
      <table class="details-table">
        <tr>
          <th>Status</th>
          <td>{{ ticket.status | titlecase }}</td>
        </tr>
        <tr>
          <th>Price</th>
          <td>{{ ticket.price | number:'1.2-2' }} MAD</td>
        </tr>

        <tr>
          <th>Purchased On</th>
          <td>{{ ticket.created_at | date:'medium' }}</td>
        </tr>
      </table>

      <div class="qr-container">

        <p style="text-align: center;"><strong>Your QR Code:</strong></p>
        <qrcode 
          [qrdata]="ticket.QR_code"
          [width]="200"
          [errorCorrectionLevel]="'M'">
        </qrcode>
      </div>


    </section>


  </mat-card-content>

  <mat-card-actions>
    <button 
      mat-raised-button 
      color="warn" 
      [ngStyle]="{'background-color': isLoading? 'var(--white-color)': 'var(--warn-color)'}"
      (click)="downloadTicket()">
      <ng-container *ngIf="!isLoading">
        <div style="display: flex; align-items: center; justify-content: center;">
          <mat-icon>download</mat-icon>
          <p>
            Download Ticket
          </p>

        </div>
      </ng-container>
      <ng-container *ngIf="isLoading">
        <mat-spinner diameter="20"  mode="indeterminate" color="warn"></mat-spinner>
      </ng-container>
    </button>

  </mat-card-actions>
</mat-card>
