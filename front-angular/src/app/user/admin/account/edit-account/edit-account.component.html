<div class="edit-account-container" 
     [class.mobile-layout]="isMobile$ | async"
     [class.tablet-layout]="isTablet$ | async"
     [class.small-screen-layout]="isSmallScreen$ | async"
     [style.padding]="containerPadding$ | async"
     @pageTransition>

  <!-- Header Section -->
  <div class="header-section" @fadeInUp>
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title" [style.font-size]="responsiveFontSize$ | async">
          <mat-icon class="title-icon">edit</mat-icon>
          Edit Profile
        </h1>
        <p class="page-subtitle">Change your account details below</p>
      </div>
    </div>
  </div>

  <!-- Form Card Section -->
  <div class="form-section">
    <mat-card class="edit-account-card mat-elevation-z4" 
              @slideInRight
              [style.max-width]="(isMobile$ | async) ? '95%' : '80%'"
              [style.margin]="(isMobile$ | async) ? '1rem auto' : '2rem auto'">
      
      <mat-card-header @fadeInUp>
        <mat-card-title [style.font-size]="responsiveFontSize$ | async">
          <mat-icon class="card-icon">person_edit</mat-icon>
          Profile Information
        </mat-card-title>
        <mat-card-subtitle>Update your personal details and password</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="accountForm" 
              (ngSubmit)="onSubmit()"
              class="account-form"
              [ngClass]="formLayout$ | async"
              [style.gap]="responsiveSpacing$ | async"
              @fadeInUp>

          <!-- Name Field -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Full Name</mat-label>
            <input matInput formControlName="name" />
            <mat-icon matSuffix>person</mat-icon>
            <mat-error *ngIf="accountForm.get('name')?.hasError('required')">
              Name is required
            </mat-error>
          </mat-form-field>

          <!-- Email Field -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" />
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="accountForm.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="accountForm.get('email')?.hasError('email')">
              Enter a valid email
            </mat-error>
          </mat-form-field>

          <!-- Password Field -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Password</mat-label>
            <input matInput type="password" formControlName="password" placeholder="••••••••" />
            <mat-icon matSuffix>lock</mat-icon>
            <mat-error *ngIf="accountForm.get('password')?.hasError('required')">
              Password is required
            </mat-error>
            <mat-error *ngIf="accountForm.get('password')?.hasError('minlength')">
              Minimum 8 characters
            </mat-error>
          </mat-form-field>

          <!-- Confirm Password Field -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Confirm Password</mat-label>
            <input matInput type="password" formControlName="password_confirmation" placeholder="••••••••">
            <mat-icon matSuffix>lock_reset</mat-icon>
            <mat-error *ngIf="accountForm.errors?.['passwordsMismatch']">
              Passwords do not match
            </mat-error>
          </mat-form-field>

          <!-- Role Field (Read-only) -->
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Role</mat-label>
            <input matInput [value]="user?.role | titlecase" disabled />
            <mat-icon matSuffix>admin_panel_settings</mat-icon>
          </mat-form-field>

          <!-- Form Actions -->
          <div class="form-actions" @fadeInUp>
            <button mat-flat-button 
                    color="primary" 
                    type="submit" 
                    [disabled]="loading || accountForm.invalid"
                    class="save-btn"
                    @buttonPress>
              <mat-icon *ngIf="!loading">save</mat-icon>
              <span *ngIf="!loading">Save Changes</span>
              <mat-progress-spinner
                *ngIf="loading"
                diameter="20"
                color="primary"
                mode="indeterminate">
              </mat-progress-spinner>
            </button>
            
            <button mat-stroked-button 
                    type="button" 
                    (click)="goBack()"
                    class="cancel-btn"
                    @buttonPress>
              <mat-icon>arrow_back</mat-icon>
              Cancel
            </button>
          </div>

        </form>
      </mat-card-content>
    </mat-card>
  </div>

</div>
